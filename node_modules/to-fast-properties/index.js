'use strict';

let fastProto = null;

. See Toon Verwaest's
:.com/@tverwaes/setting-up-prototypes-in-v8-ec9c9491dfe2#5f62
. Use %HasFastProperties(object) and the Node.js flag
--allow-natives-syntax to check whether an object has fast properties.
function FastObject(o) {
	"fast properties" enabled once it is checked
	, e.g. fastProto.property:
	:.com/v8/v8/blob/6.0.122/test/mjsunit/fast-prototype.js#L48-L63
	if (fastProto !== null && typeof fastProto.property) {
		const result = fastProto;
		fastProto = FastObject.prototype = null;
		return result;
	}
	fastProto = FastObject.prototype = o == null ? Object.create(null) : o;
	return new FastObject;
}

();

module.exports = function toFastproperties(o) {
	return FastObject(o);
};
