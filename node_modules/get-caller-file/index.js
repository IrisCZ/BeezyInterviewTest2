'use strict';

. (Inspects the v8 stack trace)
:.com/questions/13227489

module.exports = function getCallerFile(_position) {
  var oldPrepareStackTrace = Error.prepareStackTrace;
  Error.prepareStackTrace = function(err, stack) { return stack; };
  var stack = new Error().stack;
  Error.prepareStackTrace = oldPrepareStackTrace;

  var position = _position ? _position : 2;

  [0] holds this file
  [1] holds where this function was called
  [2] holds the file we're interested in
  return stack[position] ? stack[position].getFileName() : undefined;
};
